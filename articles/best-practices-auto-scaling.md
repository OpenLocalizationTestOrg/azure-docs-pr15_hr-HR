<properties
   pageTitle="Upute za Autoscaling | Microsoft Azure"
   description="Upute za automatsko skaliranje dinamički dodijeliti resursa potrebnih aplikacija."
   services=""
   documentationCenter="na"
   authors="dragon119"
   manager="christb"
   editor=""
   tags=""/>

<tags
   ms.service="best-practice"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="07/13/2016"
   ms.author="masashin"/>

# <a name="autoscaling-guidance"></a>Upute za Autoscaling

[AZURE.INCLUDE [pnp-header](../includes/guidance-pnp-header-include.md)]

## <a name="overview"></a>Pregled
Autoscaling je postupak dinamički Dodjela resursa potrebnih aplikacija u skladu potrebama performanse i zadovoljavaju razini usluge (SLA), tijekom minimiziranje runtime troškove. Kao što je rastom količinu rad aplikacije možda ćete morati dodatne resurse za omogućivanje izvršiti njegov zadaci pravovremeno. Kao zahtjev slackens, resursi može biti deaktivirali dodijeljene da biste minimizirali troškove dok još uvijek održavanje odgovarajuće performanse i SLA za sastanak.
Autoscaling vodi prednost elasticity oblaka hostira okruženja tijekom easing indirektni upravljanje. To radi smanjivanjem potrebe za operator neprestano praćenje performansi sustava i donošenje odluke o dodavanju i uklanjanju resursi.
>[AZURE.NOTE] Autoscaling primjenjuje na sve resursa koji se koriste u aplikaciji, ne samo računalnim resursi. Na primjer, ako vaš sustav koristi redovima poruka za slanje i primanje informacija, ga mogli stvoriti dodatne redove kao što je mijenja veličinu.

## <a name="types-of-scaling"></a>Vrste promjena veličine
Promjena veličine obično traje jedan od sljedeća dva oblika:

- **Okomito** (često se nazivaju _Skaliranje gore i dolje_). Ovaj obrazac zahtijeva mijenjate hardver (povećati ili smanjiti broj njegov kapacitet i performanse), ili ponovno implementirate rješenja pomoću zamjenski hardver koji ima odgovarajuće kapacitetu i performanse. U okruženje oblaka hardverska platforma obično je virtualiziranom okruženju. Osim ako je izvorni hardver je značajno overprovisioned, s consequent određeno veliko slovo troškovima okomito skaliranje prema gore u ovom okruženju uključuje dodjeljivanja jače resurse i premještanje sustava na te nove resurse. Okomito skaliranje je često disruptive postupak koji zahtijeva upućivanje sustav privremeno nedostupan dok je u tijeku ponovno implementirati. Možda ćete moći zadržati izvorni sustav pokrenut dok novi hardver je dodijeljen, a ne unese putem Interneta, ali postoji vjerojatno biti neke prekida tijekom obrade prijelaza iz stare okruženja na novu. Nije neuobičajeno da biste koristili autoscaling implementaciju okomiti strategija skaliranja.
- **Vodoravno** (često se nazivaju _Skaliranje sami pa u_). U ovom obrascu potreban je implementacija rješenja na dodatne ili manje resursa koji su obično obavješćivanje resursi umjesto high-powered sustavima. Rješenje možete nastaviti pokretanje bez prekida dok su te resurse dodjeli. Po dovršetku postupka dodjele resursa kopije elemente koji se sastoji rješenje mogu implementiran na dodatne resurse i učinili dostupnima. Ako je zahtjev izostavlja, dodatne resurse možete povratiti nakon njihova korištenja elemente ste je zatvorio. Mnoge oblaka sustave, uključujući Microsoft Azure podržava automatizaciju ovaj oblik skaliranja.

## <a name="implement-an-autoscaling-strategy"></a>Implementacija stvaranje strategije autoscaling
Stvaranje autoscaling Strategije implementacije obično obuhvaća sljedeće komponente i procesa:

- Instrumentation i nadzor sustavi na razini aplikacije, servisa i infrastrukture. Ti sustavi snimite ključa metrika, kao što su vrijeme odaziva, reda čekanja duljine, procesora i memorije.
- Donošenje odluka logike koji mogu procijeniti nadziranim skaliranja čimbenika protiv pragovi unaprijed definirane sustava ili rasporede i donošenje odluka o tome je li za promjenu veličine ili ne.
- Komponente koje ste odgovorni za izvršavanje zadataka pridružene skaliranje sustava, kao što su Dodjela resursa ili deaktivirali Dodjela resursa.
- Testiranje, nadzor i ugađanje od strategija autoscaling da biste bili sigurni da funkcionira prema očekivanjima.

Većina oblaku okruženja, kao što su Azure, navedite ugrađene autoscaling mehanizme uobičajeni scenariji tu adresu. Ako okruženje ili servisa koristite ne nudi potrebne automatski skaliranja funkcionalnost ili ako imate ekstremne autoscaling preduvjeti izvan njegovim mogućnostima, prilagođene implementacije može biti potrebno. Pomoću ova prilagođene implementacija prikupljanje radu i metrike sustava, analizirati ih da biste odredili relevantnih podataka i sukladno tome skaliranje resursi.


## <a name="configure-autoscaling-for-an-azure-solution"></a>Konfiguriranje autoscaling Azure rješenja
Za konfiguriranje autoscaling vašeg rješenja Azure na nekoliko načina:

- **Automatsko skaliranje Azure** podržava Najčešći scenariji skaliranja temelji na raspored i po želji, koji se prikazuje skaliranje operacije na temelju metrike runtime (kao što su Upotreba procesor, Duljina reda čekanja ili ugrađene i prilagođene mjerača). Jednostavni autoscaling pravila za rješenje brzo i jednostavno možete konfigurirati tako da pomoću portala za Azure. Detaljnije kontrola, možete učiniti pomoću [Azure usluga upravljanja REST API -JA](https://msdn.microsoft.com/library/azure/ee460799.aspx) ili [Azure resursima REST API -JA](https://msdn.microsoft.com//library/azure/dn790568.aspx). [Nadzor biblioteka servisa upravljanja Azure](http://www.nuget.org/packages/Microsoft.WindowsAzure.Management.Monitoring) i [U biblioteci Microsoft uvida](https://www.nuget.org/packages/Microsoft.Azure.Insights/) (u pretpregledu) SDK-ovi koji omogućuju prikupljanje mjernih podataka iz različitih resursa i izvođenje autoscaling tako da koriste REST API-ji. Za resurse gdje voditelj resursa Azure podrška nije dostupna ili ako koristite Azure servise u Oblaku, servis za upravljanje REST API-JA može se koristiti za autoscaling. U svim ćete drugim slučajevima pomoću upravitelja resursa Azure.
- **Prilagođena rješenja**, ovisno o vašem instrumentation aplikacija i značajki za upravljanje Azure, može biti korisno. Ako, na primjer, može koristiti Azure Dijagnostika ili druge načine instrumentation u aplikaciji, zajedno s prilagođenog koda neprestano nadzora i izvoz metriku aplikacije. Može imati prilagođenog pravila koja funkcionira na te metriku i poslužite se Upravljanje servisom ili Voditelj resursa REST API-JA je da biste pokrenuli autoscaling. Metriku za pokretanje operacije skaliranja može biti bilo koje brojač ugrađene ili prilagođene ili druge instrumentation implementirati u aplikaciji. No Prilagođena rješenja nije jednostavno možete implementirati, a razmatranje samo ako ništa od prethodnog pristupa ispuniti svojim potrebama. [Blokiranje aplikacije Autoscaling](http://msdn.microsoft.com/library/hh680892%28v=pandp.50%29.aspx) čini korištenje takvog.
- **Servisa drugih proizvođača**, kao što je [Paraleap AzureWatch](http://www.paraleap.com/AzureWatch)omogućuju vam da biste skalirali rješenje ovisno o rasporedima, servis za učitavanje i sustava pokazatelji, pravila za prilagođene i kombinacije različite vrste pravila.

Prilikom odabira koje rješenje autoscaling prihvaćaju, imajte na umu sljedeće:

- Korištenje značajki ugrađene autoscaling platforme, ako se možete upoznati s potrebama. Ako nije, razmisliti o li zaista potrebno složenije skaliranja značajke. Primjeri dodatni preduvjeti može obuhvaćati i preciznosti više kontrola, sve načine možete otkriti događaje okidača za skaliranje, skaliranje preko pretplate i promjene veličine druge vrste resursa.
- Preporučujemo ako predviđanje opterećenje aplikacije s dovoljno točnost ovisiti samo na zakazani autoscaling (Dodavanje i uklanjanje instance da bi odgovarao predviđenu peaks u zahtjev). Ponovno aktiviranje autoscaling na temelju metrike koji se prikupljaju tijekom izvođenja dopuštanja učiniti nepredvidljive promjene u zahtjev kojoj to nije moguće koristiti. Obično možete kombinirati sljedećih pristupa. Ako, na primjer, stvorite strategija koji dodaje resurse kao što su računalnim, za pohranu i redove, temeljena na rasporedu vremena kada znate aplikacija je najviše zauzet. Pomaže da biste bili sigurni da je kapacitet dostupan kada je to potrebno, bez odgode naišao na prilikom pokretanja novih instanci. K tome, za svako zakazani pravilo definirati metriku koje je moguće ponovno aktiviranje autoscaling tijekom tog razdoblja da biste bili sigurni aplikaciju možete rukovati osigurale trajne, ali nepredvidljive peaks u zahtjev.
- Često je teško razumijevanje odnosa između metriku i kapacitet preduvjeti, osobito kada aplikacija na početku implementiran. Želite Dodjela malo dodatni kapaciteta na početku i zatim praćenje i ugađanje autoscaling pravila da bi se prikazala kapacitet bliže stvarni učitavanju.

### <a name="use-azure-autoscale"></a>Korištenje Azure automatsko skaliranje
Automatsko skaliranje omogućuje konfiguriranje skaliranje izgleda i promjena veličine u mogućnostima rješenja. Automatsko skaliranje automatski možete dodati i ukloniti instance web Azure servise u Oblaku i uloge suradnika, Azure mobilne usluge i značajka web-aplikacije u servisu Azure aplikacije. Također možete omogućiti automatsko skaliranje za pokretanje i zaustavljanje instance programa Azure virtualnih računala. Stvaranje strategije Azure autoscaling obuhvaća dva skupa čimbenika:

- Autoscaling utemeljen na raspored koji može osigurati dodatne instance dostupnih da bi odgovarali očekivani Vršna u odjeljku korištenje, a mogu mijenjati veličinu u kada vrijeme Vršna prošlo. To omogućuje vam da biste bili sigurni da imate dovoljno instance već pokrenut, bez čekanja da Upoznajte opterećenje sustav.
- Utemeljen na metriku autoscaling koji reacts čimbenicima kao što su average procesora tijekom posljednjeg sat ili zaostale poruka koje je rješenje obrađuje Azure prostora za pohranu ili red Bus servisa Azure. Time se omogućuje aplikacije Upoznajte zasebno iz pravila zakazani autoscaling kako bi odgovarao neplanirano ili nepredviđene promjene u zahtjev.

Kada se koristi automatsko skaliranje Imajte na umu sljedeće:

- Strategije autoscaling kombinira zakazano i sustavom metriku skaliranja. Možete navesti obje vrste pravila za uslugu.
- Trebali biste konfigurirati pravila autoscaling i praćenje performansi aplikacije tijekom vremena. Korištenje ovog nadzor rezultata da biste prilagodili način kojim sustavu mijenja veličinu po potrebi. Međutim, imajte na umu te autoscaling nije trenutačno proces. Potrebno vrijeme Upoznajte metrike kao što je prosjek CPU Upotreba premašuju (ili kvartalne ispod) određeni prag.
- Autoscaling pravila koja koristi otkrivanje mehanizam mjerni okidača atributa (kao što su procesora korištenje ili red duljina) na temelju pomoću agregatnu vrijednost tijekom vremena, a ne trenutačno vrijednosti, da biste pokrenuli akciju autoscaling. Prema zadanim postavkama zbrajanja je prosjek vrijednosti. To sprječava sustava reagira previše brzo ili uzrokuju brzog oscillation. Omogućuje i vremena za nove instance automatski-pokrenute namiriti u izvodi načinu, onemogućuje autoscaling dodatne akcije koje su se pojavile dok se pokreće nove instance. Za servise u Oblaku Azure i Azure virtualnim strojevima zadano razdoblje za skupljanja u 45 minuta, pa ga može potrajati ovog vremenskog razdoblja za mjerenje da biste pokrenuli autoscaling kao odgovor na krivina u zahtjev. Promjena zbrajanja razdoblje pomoću SDK, ali imajte na umu da razdoblja manje od 25 minuta pogrešku može uzrokovati nepredvidljive rezultate (Dodatne informacije potražite u članku [Automatsko skaliranje servise u Oblaku na procesora postotak s bibliotekom Azure nadzor Management Services](http://rickrainey.com/2013/12/15/auto-scaling-cloud-services-on-cpu-percentage-with-the-windows-azure-monitoring-services-management-library/)). Web-aplikacijama averaging razdoblje je mnogo kraći, dopuštanja nove instance da bi bio dostupan u oko pet minuta nakon svake promjene da biste average okidača mjere.
- Ako konfigurirate autoscaling pomoću SDK umjesto web-portala, možete odrediti detaljnije rasporeda tijekom kojeg su aktivni pravila. Stvaranje vlastite metriku i pomoću njih sa ili bez postojeće autoscaling pravila. Na primjer, možda želite koristite zamjenski mjerača, kao što je broj zahtjevi po sekundi ili dostupnost average memorije ili prilagođeni mjerača koji mjere određeni poslovni procesi.
- Kada autoscaling virtualnim računalima sustava Azure mora implementirati broj pojavljivanja virtualnog računala koja je jednaka maksimalni broj će dopustiti autoscaling da biste pokrenuli. Ove instance mora biti dio iste dostupnosti skupa. Mehanizam autoscaling virtualnim strojevima stvaranje ili brisanje pojavljivanja virtualnog računala; Umjesto toga pravila autoscaling konfigurirate će pokretanje i zaustavljanje odgovarajući broj ove instance. Dodatne informacije potražite u članku [automatski promijeniti omjer aplikacije koje se izvode Web uloge, uloge suradnika ili virtualnim računalima](./cloud-services/cloud-services-how-to-scale.md).
- Ako nije moguće pokrenuti novih instanci, možda s obzirom do najviše za pretplatu ili dođe do pogreške prilikom pokretanja, na portalu može prikazivati da autoscaling postupak je uspio. Međutim, kasnije **ChangeDeploymentConfiguration** događaja koji se prikazuju na portalu služi samo da zatraženo je prilikom pokretanja servisa te će biti bez događaja da biste naznačili uspješno je dovršena.
- Da biste se povezali resurse kao što su baze podataka SQL instanci "i" Redovi instanca servisa za računalnim možete koristiti web-portal korisničkog Sučelja. Omogućuje lakše pristupiti zasebne ručno i automatsko skaliranje mogućnosti konfiguracije za svaki povezani resursi. Dodatne informacije potražite u članku [Kako: veza resursa na neki servis u oblaku](cloud-services-how-to-manage.md#linkresources) i [upute za promjenu veličine aplikacije](./cloud-services/cloud-services-how-to-scale.md).
- Kada konfigurirate te više pravila, nije moguće su u sukobu s drugom. Automatsko skaliranje koristi sljedeća pravila za rješavanje sukoba da biste bili sigurni da je uvijek dovoljno broj instanci koje su pokrenute:
  - Skaliranje izvan operacije uvijek imaju prednost pred skaliranje u operacije.
  - Kada skaliranje izvan operacije sukoba, pravilo koje pokreće najvećeg povećava broj instanci ima prednost.
  - Kada promijenite veličinu u sukobu operacije, pravilo koje pokreće smanjenje najmanji broj instanci ima prednost.

<a name="the-azure-monitoring-services-management-library"></a>

## <a name="application-design-considerations-for-implementing-autoscaling"></a>Zahtjevi za aplikaciju dizajna za implementaciju autoscaling
Autoscaling nije trenutno rješenja. Jednostavno dodavanje resursa u sustav ili pokrenute instance više procesa ne jamči da će poboljšati performanse sustava. Prilikom dizajniranja stvaranje strategije autoscaling Imajte na umu sljedeće:

- Sustav mora biti osmišljeni tako da se vodoravno skalabilni. Izbjeći odabiranje pretpostavke o afinitet instancu; Dizajniranje rješenja koje je potreban kod uvijek izvodi u instancu procesa. Kada vodoravno skaliranje servis u oblaku ili web-mjesto, ne pretpostavlja da niz zahtjeve iz istog izvora uvijek se usmjeriti u istoj instanci. Isti razloga dizajna services da biste se bez praćenja stanja Izbjegnite Zahtijevanje niza zahtjeva iz aplikacije da biste uvijek se usmjeriti u istoj instanci servisa. Prilikom dizajniranja servis koji se čita poruke iz reda i obrađuje ih ne provjerite sve pretpostavke o koje instancu od ručica za servis za određenu poruku. Autoscaling se može pokrenuti dodatne instance servisa kao što je Duljina reda čekanja poveća. [Natječu uzorak koje korisnici](http://msdn.microsoft.com/library/dn568101.aspx) donose upute za rješavanje scenarij.
- Ako rješenje implementira dugoročnih zadatka, Dizajnirajte ovaj zadatak za podršku i skaliranje izgleda i promjena veličine u. Bez krajnji pažnju, takve zadatka mogu omesti instance komponente procesa isključuje čistu kada sustav mijenja veličinu u ili može izgubiti podatke ako postupak prisilno prekinuti. Najbolje refactor dugoročnih zadatka i prekinuti gore obrada koji se izvodi u manje, samostalni blokova. Na [kanali i filtri uzorak](http://msdn.microsoft.com/library/dn568100.aspx) nudi primjera kako to možete postići.
- Umjesto toga možete implementirati Kontrolna točka mehanizam stanja podatke o zadatku u pravilnim vremenskim razmacima zapisa i spremite to stanje u durable prostora za pohranu koji mogu pristupiti bilo kojoj instanci procesa koji se izvodi zadatak. Na taj način ako postupak je isključen, rada koja ga je izvođenje mogu se nastaviti iz zadnjeg kontrolne točke pomoću drugoj instanci.
- Kada se pozadinske zadatke na zasebnom računalnim slučajevima, kao što su u tempiranja uloge servisa u oblaku hostirane aplikacije, možda morati skaliranje različite dijelove aplikacije pomoću različita skaliranja pravila. Na primjer, možda ćete morati implementacija dodatne korisničko sučelje (UI) računalnim instance bez povećanje broja pozadine izračunati instanci ili suprotan to. Ako imaju različite razine usluge (kao što su osnovni i premium servis paketa), morate za promjenu veličine u resursima računalnim za pakete usluga premium agresivnije od onih za pakete osnovna usluga da bi se ispunjavaju SLA.
- Razmislite o korištenju duljinu reda čekanja putem kojeg korisničkog Sučelja i pozadine za izračun instance komunikaciju kao kriterija za strategije autoscaling. Ovo je najbolje pokazatelj neravnoteži ili razlika između trenutnog opterećenja i obrada kapacitet zadatak u pozadini.
- Ako strategije autoscaling temeljem mjerača koji mjere poslovnim procesima, kao što je broj narudžbe po satu ili Prosječno vrijeme izvođenja složene transakcije, provjerite je li potpuno razumijevanje odnosa između rezultate iz ove vrste mjerača i stvarne računalnim kapacitetom. Možda će biti potrebno radi skaliranja više komponenti i izračunajte jedinica u odgovoru na promjene u mjerača poslovni proces.  
- Da biste spriječili pokušaja Vremensko mjerilo prenapadno i izbjegli troškove pridruženi pokrenutim mnogo tisuće instance sustava, razmislite o ograničavanje maksimalni broj instanci koje je moguće automatski dodati. Većina autoscaling mehanizme omogućuju da odredite najmanji i najveći broj instanci za pravilo. Osim toga, razmislite o obavljanje Smanji funkcionalnost koja nudi sustav ako maksimalni broj instanci uveden i sustav i dalje je pretrpan.
- Imajte na umu tog autoscaling možda neće biti najprikladnije mehanizam za rukovanje iznenadno neprekidnog rada u radno opterećenje. Ga traje Dodjela resursa i pokretanje novih instanci servisa ili dodavanje resursa u sustav, a zahtjev Vršna možda ste predali po vremenu te dodatne resurse uvedena dostupna. U ovom scenariju, možda je bolje throttle servis. Dodatne informacije potražite u članku [Ograničavanje uzorka](http://msdn.microsoft.com/library/dn589798.aspx).
- Nasuprot tome, ako je potrebna kapaciteta da obradi sve zahtjeve za kada glasnoću fluktuiraju hitro i trošak nije glavne prateći faktor, razmislite o korištenju stvaranje strategije izrazito autoscaling koji se pokreće dodatne instance brže. Možete koristiti i zakazani pravila koja pokreće dovoljno broj instanci da bi odgovarao Maksimalno opterećenje prije nego što se očekuje te učitavanja.
- Mehanizam autoscaling trebali biste praćenje postupka autoscaling i pojedinosti svaki događaj autoscaling u zapisniku (što ga je pokrenula, resursima su dodati ili ukloniti, a kada). Ako stvorite prilagođeni autoscaling mehanizam, provjerite je li ga ugrađuje tu mogućnost. Analizirati informacije pomoću kojih se mjere učinkovitosti strategija autoscaling i ugađanje prema potrebi. Ugađanje i u kratki pojam, kao što je uzoraka korištenja postaju bila pa prijeko dugoročnu, kao što je proširuje tvrtke ili poslovanja preduvjeti za aplikaciju. Ako aplikacija je dostigne gornju granicu definirali za autoscaling, će mehanizam možda i upozorava operator koji nije moguće ručno pokretanje dodatne resurse prema potrebi. Imajte na umu da u sljedećim okolnostima operator mogu biti odgovoran za ručno uklanjanje ove resurse nakon povećavaju eases.

## <a name="related-patterns-and-guidance"></a>Srodni uzoraka i upute
Sljedeće obrazaca i smjernice možda će vas relevantne za vašu situaciju kada implementacijom autoscaling:

- [Ograničavanje uzorka](http://msdn.microsoft.com/library/dn589798.aspx). Ovaj uzorak opisuje kako aplikaciju možete i dalje funkcionirati i sastanke SLA kada povećava zahtjev smješta ekstremne opterećenje resursa. Ograničavanje može se koristiti s autoscaling da biste spriječili sustava onemogućuje overwhelmed dok sustav mijenja veličinu izgleda.
- [Natječu uzorak koje korisnici](http://msdn.microsoft.com/library/dn568101.aspx). Ovaj uzorak opisuje kako implementirati skup instanci servisa koja možete rukovati porukama iz bilo koje instance aplikacije. Autoscaling se može koristiti za pokretanje i Zaustavljanje servisa slučajeve tako da odgovara predviđenu radno opterećenje. Taj se način omogućuje sustava za obradu više poruka istodobno možete optimizirati propusnost, poboljšati skalabilnost i dostupnost i saldo povećavaju.
- [Instrumentation i upute za Telemetriju](http://msdn.microsoft.com/library/dn589775.aspx). Instrumentation i telemetrijskih su ključni za prikupljanje informacija koje mogu pokretati autoscaling postupak.

## <a name="more-information"></a>Dodatne informacije
- [Upute za promjenu veličine aplikacije](./cloud-services/cloud-services-how-to-scale.md)
- [Automatski promijeniti omjer aplikacije koje se izvode Web uloge, uloge suradnika ili virtualnim strojevima](cloud-services-how-to-manage.md#linkresources)
- [Kako: veza resursa na neki servis u oblaku](cloud-services-how-to-manage.md#linkresources)
- [Promjena veličine povezani resursi](./cloud-services/cloud-services-how-to-scale.md#scale-link-resources)
- [Azure nadzor biblioteke za upravljanje servisima](http://www.nuget.org/packages/Microsoft.WindowsAzure.Management.Monitoring)
- [Upravljanje servisom za Azure REST API-JA](http://msdn.microsoft.com/library/azure/ee460799.aspx)
- [Azure resursima REST API-JA](https://msdn.microsoft.com/library/azure/dn790568.aspx)
- [Microsoft Insights biblioteka](https://www.nuget.org/packages/Microsoft.Azure.Insights/)
- [Operacije na Autoscaling](http://msdn.microsoft.com/library/azure/dn510374.aspx)
- [Prostor za naziv Microsoft.WindowsAzure.Management.Monitoring.Autoscale](http://msdn.microsoft.com/library/azure/microsoft.windowsazure.management.monitoring.autoscale.aspx)
